<!DOCTYPE html>
<html>
<head>
  <title>Demo Restaurant Menu</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin: 20px; background: #f4f4f4;}
    .category-section { margin: 30px auto; background:#fff; border-radius:8px; max-width:400px; box-shadow:0 2px 8px #ccc; }
    .category-title { font-size: 24px; margin: 20px 0 10px; color: #0077cc;}
    .menu-item { font-size:18px; margin: 12px auto; display: flex; justify-content:space-between; padding:0 20px;}
    .price { color: #388e3c; font-weight:bold; }
  </style>
</head>
<body>
  <h1>Demo Restaurant - Live Menu</h1>
  <div id="menuContainer"></div>
  <!-- Firebase scripts and config -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script>
    // Paste your config here!
    const firebaseConfig = {
      apiKey: "AIzaSyCQ780suirYkoWnyiTElsulpPLep7jZOBs",
      authDomain: "fir-restaurants-5a977.firebaseapp.com",
      projectId: "fir-restaurants-5a977",
      storageBucket: "fir-restaurants-5a977.firebasestorage.app",
      messagingSenderId: "536510676521",
      appId: "1:536510676521:web:6a9777efcd5b2508afa638",
      measurementId: "G-5SSTY9BBYT"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Categories you support:
    const allCategories = ["beverages", "breakfast", "lunch", "dinner"];

    function formatCategoryName(cat) {
      return cat.charAt(0).toUpperCase() + cat.slice(1);
    }

    // Fetch and Render Menu
    async function loadMenu() {
      const menuSnap = await db.collection("menuItems").get();
      const items = [];
      menuSnap.forEach(doc => items.push({ id: doc.id, ...doc.data() }));

      // Group items by category (multi-listed)
      const menuByCat = {};
      allCategories.forEach(cat => menuByCat[cat] = []);
      items.forEach(item => {
        if (Array.isArray(item.categories)) {
          item.categories.forEach(cat => { if (menuByCat[cat]) menuByCat[cat].push(item); });
        }
      });

      let html = "";
      allCategories.forEach(cat => {
        if (menuByCat[cat].length > 0) {
          html += `<div class="category-section">
            <div class="category-title">${formatCategoryName(cat)}</div>`;
          menuByCat[cat].forEach(item => {
            html += `<div class="menu-item">
              <span>${item.name}</span>
              <span class="price">â‚¹${item.price}</span>
            </div>`;
          });
          html += "</div>";
        }
      });
      document.getElementById("menuContainer").innerHTML = html || "<b>No menu items yet!</b>";
    }
    loadMenu();
  </script>
</body>
</html>
